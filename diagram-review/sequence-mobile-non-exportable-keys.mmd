---
title: Sequence Diagram - Mobile Non Exportable Keys (Planned)
config:
  theme: base
---
%% QuantumZero UML palette note: actors/external=#fff7e6/#b45309, system/component=#e0f2fe/#075985, datastore=#ecfccb/#4d7c0f, notes=#fff9c4/#d97706. Aligns diagrams to Deliverable 1 UML/DFD theme.
sequenceDiagram
  autonumber
  actor App as Wallet App
  participant KeyMgr as Key Manager (Wallet)
  participant PlatformKeys as Platform Keystore/Keychain
  participant CRYPTO as Crypto Operations
  participant AuditLog as Security Audit Log

  App->>KeyMgr: Request key generation\n(non-exportable flag)
  KeyMgr->>PlatformKeys: Generate non-exportable key\n(platform-managed)
  Note over PlatformKeys: Key material managed by platform\nnon-exportable by policy
  PlatformKeys-->>KeyMgr: Key handle / alias
  KeyMgr-->>App: Key reference only

  App->>CRYPTO: Request signing operation
  CRYPTO->>PlatformKeys: Sign data using key handle
  PlatformKeys-->>CRYPTO: Signature only
  CRYPTO-->>App: Signed payload

  App->>AuditLog: Log key usage\n(device-bound, non-exportable)
