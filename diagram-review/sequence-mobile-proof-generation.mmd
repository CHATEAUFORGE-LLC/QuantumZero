---
title: Sequence Diagram - Mobile Proof Generation (Planned)
config:
  theme: base
---
%% QuantumZero UML palette note: actors/external=#fff7e6/#b45309, system/component=#e0f2fe/#075985, datastore=#ecfccb/#4d7c0f, notes=#fff9c4/#d97706. Aligns diagrams to Deliverable 1 UML/DFD theme.
sequenceDiagram
  autonumber
  actor Verifier
  actor User
  participant UI as Wallet UI
  participant W as QuantumZero Wallet
  participant DB as Credential Store (planned)
  participant ZKP as ZKP Proof Generator
  participant CryptoEngine as Native Crypto Engine
  participant PlatformKeys as Platform Keystore/Keychain

  Verifier->>UI: Request proof\n(statement + challenge)
  UI-->>User: Display proof request\n(predicates / attributes)

  User->>UI: Approve proof generation
  UI->>W: Start proof generation

  W->>DB: Load required VC attributes only
  DB-->>W: Minimal witness data

  W->>ZKP: Prepare ZKP inputs
  ZKP->>CryptoEngine: Generate ZKP proof (native execution)
  CryptoEngine-->>ZKP: Proof generated

  ZKP->>PlatformKeys: Sign proof binding\n(challenge + domain)
  Note over PlatformKeys: Key material managed by platform\nnon-exportable by policy
  PlatformKeys-->>ZKP: Signature

  ZKP-->>W: ZKP-based Verifiable Presentation
  W-->>Verifier: Proof response
