---
title: Sequence Diagram - Mobile Selective Disclosure (Planned)
config:
  theme: base
---
%% QuantumZero UML palette note: actors/external=#fff7e6/#b45309, system/component=#e0f2fe/#075985, datastore=#ecfccb/#4d7c0f, notes=#fff9c4/#d97706. Aligns diagrams to Deliverable 1 UML/DFD theme.
sequenceDiagram
  autonumber
  actor Verifier
  actor User
  participant UI as Wallet UI
  participant W as QuantumZero Wallet
  participant DB as Credential Store (planned)
  participant SD as Selective Disclosure Engine
  participant CRYPTO as Crypto / ZKP / Proof Builder
  participant PlatformKeys as Platform Keystore/Keychain

  Verifier->>UI: Request proof\n(requested attributes + challenge)
  UI-->>User: Display requested attributes\n(toggle / checkbox UI)

  User->>UI: Select attributes to share
  UI->>W: Confirm disclosure selection

  W->>DB: Load required credential data
  DB-->>W: Credential data (local-only)

  W->>SD: Apply disclosure rules\n(filter attributes)
  SD-->>W: Minimized attribute set

  W->>CRYPTO: Generate selective proof\n(ZKP / selective disclosure)
  CRYPTO->>PlatformKeys: Sign proof (platform key)
  Note over PlatformKeys: Key material managed by platform\nnon-exportable by policy
  PlatformKeys-->>CRYPTO: Proof signature

  CRYPTO-->>W: Verifiable Presentation\n(selected attributes only)
  W-->>Verifier: VP (cryptographically enforced)
