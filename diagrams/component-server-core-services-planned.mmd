---
title: Component Diagram - Server Core API Services (Admin/Issuance/Revocation/Verification) (Planned)
config:
  theme: base
---
%% QuantumZero UML palette note: actors/external=#fff7e6/#b45309, system/component=#e0f2fe/#075985, datastore=#ecfccb/#4d7c0f, notes=#fff9c4/#d97706. Aligns diagrams to Deliverable 1 UML/DFD theme.
%% NOTE: This diagram expresses the intended target server design (Planned). Current implementation is shown in component-server-overview.mmd and component-server-microservices.mmd.
flowchart TB
    %% QuantumZero UML palette (standardized)
    classDef actor fill:#fff7e6,stroke:#b45309,stroke-width:2px
    classDef component fill:#e0f2fe,stroke:#075985,stroke-width:2px
    classDef service fill:#e8f5e9,stroke:#166534,stroke-width:2px
    classDef datastore fill:#ecfccb,stroke:#4d7c0f,stroke-width:2px
    classDef planned fill:#f3f4f6,stroke:#6b7280,stroke-width:2px,stroke-dasharray: 5 3

    %% External clients (examples)
    AdminBrowser["<<actor>> Admin User (Browser)"]:::actor
    IssuerClient["<<actor>> Issuer System / Operator"]:::actor
    VerifierClient["<<actor>> Verifier / Relying Party"]:::actor

    subgraph Cloud_Infra["<<system>> QuantumZero Backend Infrastructure (Planned)"]
        direction TB
        Gateway["<<component>> API Gateway (Planned)<br/>TLS termination (TLS 1.3 requirement)<br/>Routing: /admin, /issuance, /verification, /revocation"]:::planned

        subgraph Core_Services["<<execution environment>> Microservices (containerized)"]
            direction LR
            AdminAPI["<<service>> Admin API"]:::service
            IssuanceAPI["<<service>> Issuance API"]:::planned
            VerificationAPI["<<service>> Verification API"]:::planned
            RevocationAPI["<<service>> Revocation API"]:::planned
            Logs["<<component>> Admin/Audit Logs<br/>Structured JSON (planned)"]:::planned
        end

        Trust_Reg[("<<database>> Trust Registry / Ledger Simulation (planned)<br/>Schema reference exists in QuantumZero-server/ledgerDB")]:::planned
    end

    %% Current external dependencies (server-wide)
    Postgres[("<<database>> PostgreSQL (Admin DB)<br/>Current: issuers/schemas/cred_defs/users/sessions")]:::datastore
    LedgerBrowser["<<component>> Ledger Browser (VON)"]:::component

    %% Access patterns
    AdminBrowser -->|HTTPS| Gateway
    IssuerClient -->|HTTPS| Gateway
    VerifierClient -->|HTTPS| Gateway

    Gateway --> AdminAPI
    Gateway --> IssuanceAPI
    Gateway --> VerificationAPI
    Gateway --> RevocationAPI

    %% Persistence/logging (planned separation; details TBD)
    AdminAPI --> Postgres
    AdminAPI --> Logs
    IssuanceAPI --> Logs
    VerificationAPI --> Logs
    RevocationAPI --> Logs

    %% Trust registry + ledger integration (planned)
    AdminAPI -.-> Trust_Reg
    IssuanceAPI -.-> Trust_Reg
    VerificationAPI -.-> Trust_Reg
    RevocationAPI -.-> Trust_Reg

    IssuanceAPI -. ledger access planned .-> LedgerBrowser
    VerificationAPI -. ledger access planned .-> LedgerBrowser
    RevocationAPI -. ledger access planned .-> LedgerBrowser
    AdminAPI -->|ledger access (current)| LedgerBrowser

    %% Metadata note content documented in DIAGRAMS.md
