---
title: DFD Level 2 - Issuer Onboarding (Process 1.0 Detailed)
config:
  theme: base
---
%% DFD (Gane-Sarson) notation aligned to sample.
%% Level 2: Detailed decomposition of Process 1.0 (Issuer Onboarding).
flowchart TB
    classDef external fill:#fff2cc,stroke:#111111,stroke-width:1.5px
    classDef process fill:#fff2cc,stroke:#111111,stroke-width:1.5px
    classDef datastore fill:#fff2cc,stroke:#111111,stroke-width:1.5px

    Issuer["Issuer System"]:::external
    Admin["Admin User"]:::external

    P11(["1.1<br>Validate Signed<br>Request"]):::process
    P12(["1.2<br>Store Issuer<br>Request"]):::process
    P13(["1.3<br>Review<br>Request"]):::process
    P14(["1.4<br>Approve<br>Issuer"]):::process
    P15(["1.5<br>Reject<br>Issuer"]):::process
    P16(["1.6<br>Emit Audit<br>Event"]):::process

    D1[["D1<br>issuer_requests<br>(staging)"]]:::datastore
    D4[["D4<br>issuers<br>(trusted registry DB)"]]:::datastore
    D7[["D7<br>audit_logs<br>(admin DB)"]]:::datastore

    Issuer -->|"POST /issuer-requests"| P11
    P11 -->|"validated payload"| P12
    P12 -->|"pending request"| D1

    Admin -->|"GET /staging/issuer-requests"| P13
    D1 -->|"pending requests"| P13
    P13 -->|"approve"| P14
    P13 -->|"reject"| P15

    P14 -->|"approved issuer"| D4
    P14 -->|"update status"| D1
    P14 -->|"approval status"| Admin

    P15 -->|"update status"| D1
    P15 -->|"rejection status"| Admin

    P14 -->|"audit event"| P16
    P15 -->|"audit event"| P16
    P16 -->|"audit record"| D7
