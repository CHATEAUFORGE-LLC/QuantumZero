---
title: Sequence Diagram - Mobile Vp Presentation (Planned)
config:
  theme: base
---
%% QuantumZero UML palette note: actors/external=#fff7e6/#b45309, system/component=#e0f2fe/#075985, datastore=#ecfccb/#4d7c0f, notes=#fff9c4/#d97706. Aligns diagrams to Deliverable 1 UML/DFD theme.
sequenceDiagram
  autonumber
  actor U as User
  participant V as Verifier (Relying Party)
  participant W as QuantumZero Wallet (Holder)
  participant PlatformKeys as Platform Keystore/Keychain

  %% References (avoid duplication):
  %% - Selective disclosure details: diagrams/sequence-mobile-selective-disclosure.mmd
  %% - Revocation/status checks: diagrams/sequence-mobile-revocation-check.mmd
  %% - Key generation flows: diagrams/sequence-mobile-*-key-generation.mmd

  V-->>W: Send proof request via QR/deep link\n(required claims + challenge + domain)
  W-->>U: Show what will be shared + options (selective disclosure)
 
  W->>W: Select matching VC(s)
  alt Selective disclosure / ZKP supported
    W->>W: Derive proof (reveal only required attributes)
  else Full VC presentation
    W->>W: Include required VC(s) as-is
  end

  W->>PlatformKeys: Sign proof response\n(challenge + domain binding)
  PlatformKeys-->>W: Signature/Proof attached

  W-->>V: Send presentation/proof package
  V->>V: Verify signature + challenge/domain binding
  V->>V: Verify proof/credential validity (per protocol)

  alt Valid + policy satisfied
    V-->>W: Presentation accepted (access granted)
    W-->>U: Success
  else Invalid / revoked / policy fail
    V-->>W: Presentation rejected (reason code)
    W-->>U: Failed + guidance
  end
