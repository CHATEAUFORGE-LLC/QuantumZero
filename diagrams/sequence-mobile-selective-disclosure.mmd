---
title: Sequence Diagram - Mobile Selective Disclosure (Service Flow)
config:
  theme: base
---
%% QuantumZero UML palette note: actors/external=#fff7e6/#b45309, system/component=#e0f2fe/#075985, datastore=#ecfccb/#4d7c0f, notes=#fff9c4/#d97706. Aligns diagrams to Deliverable 1 UML/DFD theme.
%% Related: diagrams/class-mobile-selective-disclosure.mmd (interface), diagrams/class-mobile-repositories.mmd (CredentialRepository)
sequenceDiagram
  autonumber
  participant UI as Wallet Feature/UI
  participant SD as SelectiveDisclosureService
  participant Repo as CredentialRepository

  UI->>SD: createSelectiveDisclosure(credentialId, selectedClaims, useZkp)
  activate SD
  SD->>Repo: getCredentialById(credentialId)
  activate Repo
  Repo-->>SD: Credential
  deactivate Repo

  SD->>SD: Filter claims per selectedClaims
  opt useZkp == true
    SD->>SD: generateZkProof(...) per hidden claim
  end

  SD-->>UI: SelectiveDisclosureResult
  deactivate SD
