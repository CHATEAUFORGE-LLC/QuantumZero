---
title: DFD - Admin Registry (Issuers/Schemas/CredDefs) (Level 1)
config:
  theme: base
---
%% QuantumZero UML palette note: actors/external=#fff7e6/#b45309, system/component=#e0f2fe/#075985, datastore=#ecfccb/#4d7c0f, notes=#fff9c4/#d97706. Aligns diagrams to Deliverable 1 UML/DFD theme.
flowchart LR
    %% QuantumZero UML/DFD palette (standardized)
    classDef actor fill:#fff7e6,stroke:#b45309,stroke-width:2px
    classDef process fill:#e0f2fe,stroke:#075985,stroke-width:2px
    classDef datastore fill:#ecfccb,stroke:#4d7c0f,stroke-width:2px
    classDef external fill:#eef2ff,stroke:#4338ca,stroke-width:2px

    %% External Entities
    Admin["Admin User (Browser)"]:::actor
    Ledger["Ledger Browser (VON)"]:::external

    %% Processes (Yourdon circles)
    P1(("1.0 Manage Issuers")):::process
    P2(("2.0 Manage Schemas")):::process
    P3(("3.0 Manage Credential Definitions")):::process
    P4(("4.0 Sync From Ledger")):::process
    P5(("5.0 Write Audit Event")):::process

    %% Data Stores (PostgreSQL)
    D1[["D1 issuers"]]:::datastore
    D2[["D2 schemas"]]:::datastore
    D3[["D3 credential_definitions"]]:::datastore
    D4[["D4 audit_logs"]]:::datastore

    %% CRUD flows
    Admin -- issuer CRUD --> P1
    P1 --> D1
    P1 --> P5
    P5 --> D4
    P1 --> Admin

    Admin -- schema CRUD --> P2
    P2 --> D2
    P2 --> P5
    P2 --> Admin

    Admin -- cred def CRUD --> P3
    P3 --> D3
    P3 --> P5
    P3 --> Admin

    %% Ledger sync/import flows (current implementation)
    Admin -- trigger sync/import --> P4
    P4 -->|HTTP ledger queries| Ledger
    Ledger --> P4
    P4 --> D1
    P4 --> D2
    P4 --> D3
    P4 --> P5
    P4 --> Admin
