---
title: Class Diagram - Server API Handlers (Revocation API)
config:
  theme: base
---
%% QuantumZero UML palette note: actors/external=#fff7e6/#b45309, system/component=#e0f2fe/#075985, datastore=#ecfccb/#4d7c0f, notes=#fff9c4/#d97706. Aligns diagrams to Deliverable 1 UML/DFD theme.
%% Service pattern mirrors admin-api (routes<br>handlers<br>models<br>state).
classDiagram
    direction LR
    namespace revocation_api_state {
        class AppState {
            +PgPool admin_db
            +PgPool staging_db
            +IndyClient indy_client
            +new(PgPool admin_db, PgPool staging_db, String ledger_url)$ AppState
        }
    }

    namespace revocation_api_handlers {
        class Handlers {
            <<module>>
            +configure_routes(ServiceConfig cfg)$ void
            +health_check(AppState)$ HttpResponse
            +submit_revocation_registry_request(AppState, CreateRevocationRegistryRequest)$ HttpResponse
            +approve_revocation_registry_request(AppState, Uuid)$ HttpResponse
            +reject_revocation_registry_request(AppState, Uuid)$ HttpResponse
            +submit_revocation_request(AppState, CreateRevocationRequest)$ HttpResponse
            +approve_revocation_request(AppState, Uuid)$ HttpResponse
            +reject_revocation_request(AppState, Uuid)$ HttpResponse
            +get_revocation_status(AppState, Uuid)$ HttpResponse
        }
    }

    %% External / shared types
    class PgPool { <<SQLx>> }
    class IndyClient { <<qz-indy-client>> }
    class ServiceConfig { <<Actix-Web>> }
    class HttpResponse { <<Actix-Web>> }
    class Uuid { <<uuid::Uuid>> }

    Handlers ..> AppState : uses
    AppState --> PgPool : admin_db
    AppState --> PgPool : staging_db
    AppState --> IndyClient : indy_client
