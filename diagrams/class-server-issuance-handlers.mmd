---
title: Class Diagram - Server API Handlers (Issuance API)
config:
  theme: base
---
%% QuantumZero UML palette note: actors/external=#fff7e6/#b45309, system/component=#e0f2fe/#075985, datastore=#ecfccb/#4d7c0f, notes=#fff9c4/#d97706. Aligns diagrams to Deliverable 1 UML/DFD theme.
%% Service pattern mirrors admin-api (routes + handlers + models + state).
classDiagram
    namespace issuance_api_state {
        class AppState {
            +PgPool admin_db
            +PgPool staging_db
            +IndyClient indy_client
            +new(PgPool admin_db, PgPool staging_db, String ledger_url)$ AppState
        }
    }

    namespace issuance_api_handlers {
        class Handlers {
            <<module>>
            +configure_routes(ServiceConfig cfg)$ void
            +health_check(AppState)$ HttpResponse
            +submit_issuer_request(AppState, CreateIssuerOnboardingRequest)$ HttpResponse
            +approve_issuer_request(AppState, Uuid)$ HttpResponse
            +reject_issuer_request(AppState, Uuid)$ HttpResponse
            +submit_schema_request(AppState, CreateSchemaRequest)$ HttpResponse
            +approve_schema_request(AppState, Uuid)$ HttpResponse
            +reject_schema_request(AppState, Uuid)$ HttpResponse
            +submit_cred_def_request(AppState, CreateCredDefRequest)$ HttpResponse
            +approve_cred_def_request(AppState, Uuid)$ HttpResponse
            +reject_cred_def_request(AppState, Uuid)$ HttpResponse
            +submit_issuance_request(AppState, CreateIssuanceRequest)$ HttpResponse
            +approve_issuance_request(AppState, Uuid)$ HttpResponse
            +reject_issuance_request(AppState, Uuid)$ HttpResponse
        }
    }

    %% External / shared types
    class PgPool { <<SQLx>> }
    class IndyClient { <<qz-indy-client>> }
    class ServiceConfig { <<Actix-Web>> }
    class HttpResponse { <<Actix-Web>> }
    class Uuid { <<uuid::Uuid>> }

    Handlers ..> AppState : uses
    AppState --> PgPool : admin_db
    AppState --> PgPool : staging_db
    AppState --> IndyClient : indy_client
