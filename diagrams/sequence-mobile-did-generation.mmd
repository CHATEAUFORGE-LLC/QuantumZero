---
title: Sequence Diagram - Mobile DID Generation
config:
  theme: base
---
%% QuantumZero UML palette note: actors/external=#fff7e6/#b45309, system/component=#e0f2fe/#075985, datastore=#ecfccb/#4d7c0f, notes=#fff9c4/#d97706. Aligns diagrams to Deliverable 1 UML/DFD theme.
sequenceDiagram
  autonumber
  actor User as Holder
  participant UI as Flutter UI
  participant DidSM as DidNotifier (didProvider)
  participant Crypto as CryptoService
  participant Storage as SecureStorageService
  participant Repo as DidRepository
  participant DB as Local SQLite (sqflite)
 User->>UI: Tap "Create Identity"
 UI->>DidSM: generateNewDid()
 DidSM->>Crypto: generateKeyPair()
  Crypto-->>DidSM: KeyPair
 DidSM->>Storage: write(keyIdRef, keyMetadata)
 Storage-->>DidSM: ok
 DidSM->>DidSM: Build Did (did:method:identifier)
 DidSM->>Repo: saveDid(did)
 Repo->>DB: insert DID record
 DB-->>Repo: ok
 Repo-->>DidSM: ok
  DidSM-->>UI: DID created
  UI-->>User: Display DID + status
