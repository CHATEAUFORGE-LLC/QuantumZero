---
title: Sequence Diagram - Mobile iOS Hardware-backed Key Generation
config:
  theme: base
---
%% QuantumZero UML palette note: actors/external=#fff7e6/#b45309, system/component=#e0f2fe/#075985, datastore=#ecfccb/#4d7c0f, notes=#fff9c4/#d97706. Aligns diagrams to Deliverable 1 UML/DFD theme.
%% Related: diagrams/sequence-mobile-did-generation.mmd (provider flow), diagrams/class-mobile-services.mmd (CryptoService)
sequenceDiagram
  autonumber
  participant Wallet as QuantumZero Mobile App
  participant Crypto as CryptoService
  participant Keychain as iOS Keychain / Secure Enclave

  Wallet->>Crypto: generateKeyPair()
  activate Crypto
  Crypto->>Keychain: Generate non-exportable keypair<br>(hardware-backed where available)
  activate Keychain
  Keychain-->>Crypto: publicKey<br>keyHandle
  deactivate Keychain
  Crypto-->>Wallet: KeyPair (publicKey, privateKeyId)
  deactivate Crypto
