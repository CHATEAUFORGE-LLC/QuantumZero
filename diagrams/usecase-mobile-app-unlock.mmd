---
title: Use Case - User Authentication
config:
  theme: base
---
flowchart TB
    %% Actors
    User((User))
    BiometricSystem[Biometric System<br/>iOS FaceID/TouchID<br/>Android BiometricPrompt]
    SecureStorage[(Secure Storage<br/>iOS Keychain<br/>Android Keystore)]
    
    %% System Boundary
    subgraph MobileApp["QuantumZero Mobile Application"]
        direction TB
        
        %% Use Cases
        LaunchApp[Launch Application]
        AuthBiometric[Authenticate with Biometric]
        AuthPIN[Authenticate with PIN Fallback]
        AccessWallet[Access Wallet]
        LockApp[Lock Application]
        CheckAuth[Verify Authentication Status]
        
        %% Relationships between use cases
        LaunchApp -.includes.-> CheckAuth
        AccessWallet -.requires.-> CheckAuth
        AuthBiometric -.extends.-> LaunchApp
        AuthPIN -.extends.-> AuthBiometric
    end
    
    %% Actor-Use Case Relationships
    User -->|initiates| LaunchApp
    User -->|performs| AuthBiometric
    User -->|performs| AuthPIN
    User -->|accesses| AccessWallet
    User -->|triggers| LockApp
    
    %% External System Relationships
    AuthBiometric -->|verifies via| BiometricSystem
    AuthPIN -->|validates via| BiometricSystem
    CheckAuth -->|reads from| SecureStorage
    AccessWallet -->|reads from| SecureStorage
    LockApp -->|updates| SecureStorage
    
    %% Notes
    note1[Priority: A<br/>Security Requirement: F-SEC-01<br/>User must authenticate using biometrics<br/>or device PIN to access wallet]
    note2[Preconditions:<br/>- App installed on device<br/>- User enrolled biometrics or PIN<br/>- Secure hardware available]
    note3[Postconditions:<br/>- User authenticated<br/>- Wallet unlocked<br/>- Session established]
    note4[Triggers:<br/>- User launches app<br/>- App returns from background<br/>- Timeout expires]
    
    %% Styling
    classDef actor fill:#fff3e0,stroke:#e65100,stroke-width:3px
    classDef useCase fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef system fill:#e0f2f1,stroke:#004d40,stroke-width:2px
    classDef note fill:#fff9c4,stroke:#f57f17,stroke-width:1px,stroke-dasharray: 5 5
    
    class User actor
    class LaunchApp,AuthBiometric,AuthPIN,AccessWallet,LockApp,CheckAuth useCase
    class BiometricSystem,SecureStorage system
    class note1,note2,note3,note4 note
